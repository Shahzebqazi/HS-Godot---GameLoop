# HS-Godot-GameLoop

Haskell Code Generator for the Godot Engine. This repo contains the starter code to generate a robust, unit tested, game loop.

## Haskell Godot Game Loop Architecture

**Developer:** dev@shahzeb.me  
**Date:** August 14, 2025  

This document details the architecture for a game loop generated by a Haskell program for the Godot game engine. The project's goal is to use Haskell's strong type system to define a robust, modern game loop structure and translate it into a functional GDScript file.

## üèóÔ∏è Architecture Breakdown

The generated Godot script follows a modern game loop pattern, decoupling game logic from rendering for consistent performance across various hardware configurations.

### 1. Core Game Loop (`GameLoop.hs`)

The main logic, defined in `GameLoop.hs`, generates the core game loop structure. This includes:

- **Fixed Timestep Logic (`_physics_process`):** For consistent, deterministic physics and game logic.
- **Variable Refresh Rate Rendering (`_process`):** For smooth visuals, using interpolation to bridge the gap between physics and render frames.
- **Primary Game State Machine:** To manage and route logic for different game states.

### 2. State Management (`StateManagement.hs`)

This module defines the `GameState` enum, which is directly translated to a Godot enum. The generated GDScript uses a match statement to route input, updates, and rendering based on the current state.

### 3. ECS (`ECS.hs`)

This file contains all data types for the Entity-Component-System (`Entity`, `Component`, `World`, and `System`). This modular approach ensures the codebase is scalable and maintainable.

### 4. UI (`UI.hs`)

`UI.hs` defines types for UI elements, which will be used to generate Godot UI nodes (buttons, labels) and manage them within the `MAIN_MENU` state.

### 5. Input Handling (`Mouse.hs`, `Keyboard.hs`)

Input is handled in an event-driven manner. The generated GDScript uses a match statement within the state machine to ensure mouse and keyboard inputs are processed differently depending on the game state (e.g., menu vs. in-game).

### 6. Interpolation

The `render_interpolated` function is a core part of the loop. It receives an alpha value to smoothly transition an object's visual position between two physics frames, providing a fluid experience on high refresh rate monitors.

### 7. Multithreading

The script includes a placeholder for multithreading, allowing developers to offload computationally intensive tasks like AI pathfinding or procedural generation to a separate thread without impacting the frame rate.
